{% extends "library/base.html" %}
{% block content %}
<div class="container">
    <h2 class="mb-4">My Borrowed Books</h2>
    {% for item in borrowed %}
    <a href="{% url 'book-detail' item.book.id %}" class="text-decoration-none">
        <div class="card mb-4 shadow-sm">
            <div class="row no-gutters">
                <!-- Book Image -->
                <div class="mt-4"> 
                <!-- <div class="col-md-2.5"> -->
                <!--    <img src="{{ item.book.cover.url }}" class="img-thumbnail" alt="Book Cover" style="width: 120px; height: 120px; object-fit: contain;"> -->
                    <img src="{{ item.book.cover.url }}" alt="Book Cover" style="width: 150px; height: 150px; object-fit: contain; border-radius: 8px; box-shadow: 0 0 4px rgba(0,0,0,0.1);"> 



                </div>

                <!-- Book Details -->
                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title">{{ item.book.title }}</h5>
                        <h6 class="card-subtitle mb-2 text-muted">{{ book.author }}</h6>
                        <p class="card-text">
                            <strong>Genre:</strong> {{ item.book.genre }}<br>
                            <strong>Published:</strong> {{ item.book.published_date }}<br>
                            <strong>ISBN:</strong> {{ item.book.isbn }} <br>
                            <strong>Borrowed On:</strong> {{ item.borrow_date }} <br>
                            <strong>Due Date:</strong> {{ item.return_date }} <br>
                        </p>
                         <!-- Return Book Button -->
                        {% if not item.return_date %}
                        <form action="{% url 'return-book' item.id %}" method="post">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-danger btn-sm">Return Book</button>
                        </form>
                        {% else %}
                        <p class="text-success">Returned on {{ item.return_date }}</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </a>
    {% empty %}
    <p>No books available.</p>
    {% endfor %}
</div>
{% endblock %}


<h2>My Borrowed Books</h2>
<ul>
  {% for item in borrowed %}
    <li>{{ item.book.title }} - Borrowed on {{ item.borrow_date }}</li>
  {% empty %}
    <li>You have not borrowed any books.</li>
  {% endfor %}
</ul>